
Päivitysohje:

Valmistele pävitetty branch, mikäli kyseessä v4.3.x niin branch on stable-4.3, tämän päivitys on helppo tehdä Githubin web kälin kautta "sync fork".

Pysäytä masto:

sudo systemctl stop mastodon-streaming mastodon-sidekiq-*@.service mastodon-web

katso upgrade notesit https://github.com/mastodon/mastodon/releases/

Huom: Käytetään branchia custom_2025 jossa merkkirajamuutos.

git pull
git merge origin/stable-4.3.x

bundle install
yarnpkg install --frozen-lockfile

JOS tulee herjaa rbenvstä (esim rbenv: version `3.2.3' is not installed (set by /home/mastodon/live/.ruby-version) )

git -C /home/mastodon/.rbenv/plugins/ruby-build pull
rbenv install 3.2.3

ja yritä uudelleen.

Toinen ehkä parantava temppu:
bundle install --redownload

Restarttaus:

sudo systemctl restart mastodon-streaming mastodon-sidekiq-*@.service mastodon-web


Käytössä seuraavat sideqick servicet:
- mastodon-sidekiq-push@30.service
- mastodon-sidekiq-pull@30.service
- mastodon-sidekiq-ingress@30.service
- mastodon-sidekiq-mailers@15.service
- mastodon-sidekiq-scheduler@30.service

